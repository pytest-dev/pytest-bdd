Changelog
=========

All notable changes to this project will be documented in this file.

The format is based on `Keep a Changelog <https://keepachangelog.com/en/1.1.0/>`_,
and this project adheres to `Semantic Versioning <https://semver.org/spec/v2.0.0.html>`.

Unreleased
----------

Added
+++++
* Added automatic feature file collection capability that can be enabled via ``bdd_auto_collect_features = true`` in pytest.ini

Changed
+++++++
* Step arguments ``"datatable"`` and ``"docstring"`` are now reserved, and they can't be used as step argument names.

Deprecated
++++++++++

Removed
+++++++

Fixed
+++++
* Fixed an issue with the upcoming pytest release related to the use of ``@pytest.mark.usefixtures`` with an empty list.
* Render template variables in docstrings and datatable cells with example table entries, as we already do for steps definitions.
* Address many ``mypy`` warnings. The following private attributes are not available anymore (`#658 <https://github.com/pytest-dev/pytest-bdd/pull/658>`_):
  * ``_pytest.reports.TestReport.scenario`` (replaced by ``pytest_bdd.reporting.test_report_context`` WeakKeyDictionary)
  * ``__scenario__`` attribute of test functions generated by the ``@scenario`` (and ``@scenarios``) decorator (replaced by ``pytest_bdd.scenario.scenario_wrapper_template_registry`` WeakKeyDictionary)
  * ``_pytest.nodes.Item.__scenario_report__`` (replaced by ``pytest_bdd.reporting.scenario_reports_registry`` WeakKeyDictionary)
  * ``_pytest_bdd_step_context`` attribute of internal test function markers (replaced by ``pytest_bdd.steps.step_function_context_registry`` WeakKeyDictionary)

Security
++++++++


[8.0.0] - 2024-11-14
----------

Added
+++++
* Gherkin keyword aliases can now be used and correctly reported in json and terminal output (see `Keywords <https://cucumber.io/docs/gherkin/reference/#keywords>`_ for permitted list).
* Added localization support. The language of the feature file can be specified using the `# language: <language>` directive at the beginning of the file.
* Rule keyword can be used in feature files (see `Rule <https://cucumber.io/docs/gherkin/reference/#rule>`_)
* Added support for multiple example tables
* Added filtering by tags against example tables
* Since the 7.x series:
  * Tags can now be on multiple lines (stacked)
  * Continuation of steps using asterisks (``*``) instead of ``And``/``But`` supported.
  * Added ``datatable`` argument for steps that contain a datatable (see `Data Tables <https://cucumber.io/docs/gherkin/reference/#data-tables>`_).
  * Added ``docstring`` argument for steps that contain a docstring (see `Doc Strings <https://cucumber.io/docs/gherkin/reference/#doc-strings>`_).

Changed
+++++++
* Changelog format updated to follow `Keep a Changelog <https://keepachangelog.com/en/1.1.0/>`_.
* Text after the ``#`` character is no longer stripped from the Scenario and Feature name.
* Since the 7.x series:

  * Use the `gherkin-official <https://pypi.org/project/gherkin-official/>`_ parser, replacing the custom parsing logic. This will make pytest-bdd more compatible with the Gherkin specification.
  * Multiline steps must now always use triple-quotes for the additional lines.
  * All feature files must now use the keyword ``Feature:`` to be considered valid.
  * Tags can no longer have spaces (e.g. ``@tag one`` and ``@tag two`` are no longer valid).
  * Text after the ``#`` character is no longer stripped from the Step name.
  * Multiline strings no longer match name based on multiple lines - only on the actual step text on the step line.

Removed
+++++++
* Dropped support for python 3.8. Supported python versions: 3.9, 3.10, 3.11, 3.12, 3.13.
* Since the 7.x series:

  * Drop compatibility with pytest < 7.0.0.

Fixed
+++++
* Since the 7.x series:

  * Updated documentation to clarify that ``--gherkin-terminal-reporter`` needs to be used with ``-v`` or ``-vv``.

8.0.0b2
----------
* Updated documentation to clarify that ``--gherkin-terminal-reporter`` needs to be used with ``-v`` or ``-vv``.
* Drop compatibility with pytest < 7.0.0.
* Continuation of steps using asterisks instead of And/But supported.
* Added ``datatable`` argument for steps that contain a datatable (see `Data Tables <https://cucumber.io/docs/gherkin/reference/#data-tables>`_).
* Added ``docstring`` argument for steps that contain a docstring (see `Doc Strings <https://cucumber.io/docs/gherkin/reference/#doc-strings>`_).
* Multiline strings no longer match name based on multiple lines - only on the actual step text on the step line.

8.0.0b1
----------
* Use the `gherkin-official <https://pypi.org/project/gherkin-official/>`_ parser, replacing the custom parsing logic. This will make pytest-bdd more compatible with the Gherkin specification.
* Multiline steps must now always use triple-quotes for the additional lines.
* All feature files must now use the keyword ``Feature:`` to be considered valid.
* Tags can no longer have spaces (e.g. ``@tag one`` and ``@tag two`` are no longer valid).
* Tags can now be on multiple lines (stacked)
* Text after the ``#`` character is no longer stripped from the Step name.

7.3.0
----------

7.2.0
----------

7.1.2
----------

7.1.1
----------

7.1
----------

7.0.1
-----

7.0.0
----------

6.1.1
-----

6.1.0
-----


6.0.1
-----


6.0.0
-----

This release introduces breaking changes in order to be more in line with the official gherkin specification.




5.0.0
-----
This release introduces breaking changes, please refer to the :ref:`Migration from 4.x.x`.


4.1.0
-----------

4.0.2
-----


4.0.1
-----


4.0.0
-----

This release introduces breaking changes, please refer to the :ref:`Migration from 3.x.x`.



3.4.0
-----



3.3.0
-----


3.2.1
----------


3.2.0
----------


3.1.1
----------

  This makes the transition of projects from python 2 to 3 easier.

3.1.0
----------


3.0.2
------


3.0.1
------


3.0.0
------


2.21.0
------



2.20.0
------



2.19.0
------


2.18.2
------


2.18.1
------


2.18.0
------


2.17.2
------


2.17.1
------


2.17.0
------

  ``pytest_bdd_apply_tag`` hook with tags like ``@xfail: Some reason``.

2.16.1
------



2.16.0
------


2.15.0
------


2.14.5
------


2.14.3
------


2.14.1
------


2.14.0
------


2.13.1
------


2.13.0
------


2.12.2
------


2.11.3
------


2.11.1
------


2.11.0
------


2.10.0
------


2.9.1
-----


2.9.0
-----


2.8.0
-----


2.7.2
-----


2.7.1
-----


2.7.0
-----


2.6.2
-----


2.6.1
-----


2.5.3
-----


2.5.2
-----


2.5.1
-----


2.5.0
-----



2.4.5
-----


2.4.3
-----


2.4.2
-----


2.4.1
-----


2.4.0
-----


2.3.3
-----


2.3.2
-----


2.3.1
-----


2.1.2
-----


2.1.1
-----


2.1.0
-----


2.0.1
-----


2.0.0
-----


1.0.0
-----



0.6.11
------


0.6.9
-----


0.6.8
-----


0.6.6
-----


0.6.5
-----


0.6.4
-----


0.6.3
-----


0.6.2
-----


0.6.1
-----


0.6.0
-----


0.5.2
-----


0.5.0
-----


0.4.7
-----


0.4.6
-----


0.4.5
-----


0.4.3
-----
