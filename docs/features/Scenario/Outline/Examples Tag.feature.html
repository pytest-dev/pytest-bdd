<h1>Feature: Scenario Outline examples could be tagged</h1>
<h2>Rule:</h2>
<h3>Background:</h3>
<ul>
<li>Given File &quot;steps.feature&quot; with content:
<pre><code class="language-gherkin">Feature: Steps are executed by corresponding step keyword decorator

  Scenario Outline:
      Given I produce &lt;outcome&gt; test

      @passed
      Examples:
      |outcome|
      |passed |

      @failed
      Examples:
      |outcome|
      |failed |

      @both
      Examples:
      |outcome|
      |passed |
      |failed |
</code></pre>
</li>
<li>Given File &quot;pytest.ini&quot; with content:
<pre><code class="language-ini">[pytest]
markers =
  passed
  failed
  both
</code></pre>
</li>
<li>And File &quot;conftest.py&quot; with content:
<pre><code class="language-python">from pytest_bdd.compatibility.pytest import fail
from pytest_bdd import given

@given('I produce passed test')
def passing_step():
  ...

@given('I produce failed test')
def failing_step():
  fail('Enforce fail')
</code></pre>
</li>
</ul>
<h3>Scenario:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>passed</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Scenario:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>failed</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Scenario:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>passed or failed</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Scenario:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>not both</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Scenario:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>both</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Scenario:</h3>
<ul>
<li>When run pytest</li>
<li>Then pytest outcome must contain tests with statuses:
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h2>Rule: Mixing tags on feature &amp; examples level</h2>
<h3>Background:</h3>
<ul>
<li>Given File &quot;steps.feature&quot; with content:
<pre><code class="language-gherkin">@feature_tag
Feature: Steps are executed by corresponding step keyword decorator
  Scenario Outline:
      Given I produce &lt;outcome&gt; test

      Examples:
      |outcome|
      |passed |

      @examples_tag
      Examples:
      |outcome|
      |failed |
</code></pre>
</li>
<li>Given File &quot;pytest.ini&quot; with content:
<pre><code class="language-ini">[pytest]
markers =
  feature_tag
  examples_tag
</code></pre>
</li>
<li>And File &quot;conftest.py&quot; with content:
<pre><code class="language-python">from pytest_bdd.compatibility.pytest import fail
from pytest_bdd import given

@given('I produce passed test')
def passing_step():
  ...

@given('I produce failed test')
def failing_step():
  fail('Enforce fail')
</code></pre>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>feature_tag</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>examples_tag</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>not feature_tag</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>not examples_tag</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must contain tests with statuses:</p>
<table>
<thead>
<tr>
<th>passed</th>
<th>failed</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>feature_tag</th>
<th>--collect-only</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must match lines:</p>
<table>
<thead>
<tr>
<th>collected 2 items</th>
</tr>
</thead>
</table>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>examples_tag</th>
<th>--collect-only</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must match lines:</p>
<table>
<thead>
<tr>
<th>collected 2 items / 1 deselected / 1 selected</th>
</tr>
</thead>
</table>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>not feature_tag</th>
<th>--collect-only</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must match lines:</p>
<table>
<thead>
<tr>
<th>collected 2 items / 2 deselected*</th>
</tr>
</thead>
</table>
</li>
</ul>
<h3>Example:</h3>
<ul>
<li>
<p>When run pytest</p>
<table>
<thead>
<tr>
<th>cli_args</th>
<th>-m</th>
<th>not examples_tag</th>
<th>--collect-only</th>
</tr>
</thead>
</table>
</li>
<li>
<p>Then pytest outcome must match lines:</p>
<table>
<thead>
<tr>
<th>collected 2 items / 1 deselected / 1 selected</th>
</tr>
</thead>
</table>
</li>
</ul>
